<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript" charset="utf-8" src="/javascript/common/common.js"></script>
<script type="text/javascript" charset="utf-8" src="/javascript/business/upload/plupload/plupload.full.min.js"> </script>
<title>upload</title>
</head>
<body>
 <!-- 这里我们只使用最基本的html结构：一个选择文件的按钮，一个开始上传文件的按钮(甚至该按钮也可以不要) -->
    <p>
        <button name="imageFile" id="imageFile">选择文件</button>
        <button id="start_upload">开始上传</button>
    </p>
    <script>

    //实例化一个plupload上传对象
    var uploader = new plupload.Uploader({
        browse_button : 'imageFile', //触发文件选择对话框的按钮，为那个元素id
        url : '/upload', //服务器端的上传页面地址
        flash_swf_url : '/javascript/business/upload/plupload/Moxie.swf', //swf文件，当需要使用swf方式进行上传时需要配置该参数
        silverlight_xap_url : '/javascript/business/upload/plupload/Moxie.xap', //silverlight文件，当需要使用silverlight方式进行上传时需要配置该参数
        filters: {
        	  mime_types : [ //只允许上传图片和zip文件
        	    { title : "Image files", extensions : "jpg,gif,png" }
        	  ],
        	  max_file_size : '400kb', //最大只能上传400kb的文件
        	  prevent_duplicates : true //不允许选取重复文件
        	},
        multipart_params: {
        	  one: '1',
        	  two: '2',
        	  three: '3',
        	  four: '4'  //也可以是一个数组
        	},
        multipart:true
    });    

    //在实例对象上调用init()方法进行初始化
    uploader.init();

    //绑定各种事件，并在事件监听函数中做你想做的事
    uploader.bind('FilesAdded',function(uploader,files){
        //每个事件监听函数都会传入一些很有用的参数，
        //我们可以利用这些参数提供的信息来做比如更新UI，提示上传进度等操作
    });
    uploader.bind('UploadProgress',function(uploader,file){
        //每个事件监听函数都会传入一些很有用的参数，
        //我们可以利用这些参数提供的信息来做比如更新UI，提示上传进度等操作
    });
    //......
    //......

    //最后给"开始上传"按钮注册事件
    document.getElementById('start_upload').onclick = function(){
        uploader.start(); //调用实例对象的start()方法开始上传文件，当然你也可以在其他地方调用该方法
    }

    </script>
</body>
</html>